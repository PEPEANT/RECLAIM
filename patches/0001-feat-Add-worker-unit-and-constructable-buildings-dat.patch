From 263c098e9ccf5cb265e2091352bf7e99d53c5384 Mon Sep 17 00:00:00 2001
From: Claude <noreply@anthropic.com>
Date: Thu, 15 Jan 2026 11:27:55 +0000
Subject: [PATCH 1/4] feat: Add worker unit and constructable buildings data

- Add worker unit (builder) to infantry category
  - No attack ability, moves only
  - Yellow vest with helmet visual
  - isBuilder flag for special handling
- Add constructable buildings definition in CONFIG:
  - barracks: Infantry production building
  - watchtower_new: Defensive turret
  - tank_depot: Armored unit production building
- Each building has buildTime, cooldown, cost, footprint for collision
---
 RECLAIM_3.4/classes.js | 29 ++++++++++++++++++++++-
 RECLAIM_3.4/data.js    | 54 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 82 insertions(+), 1 deletion(-)

diff --git a/RECLAIM_3.4/classes.js b/RECLAIM_3.4/classes.js
index 8e536b9..59f0ef8 100644
--- a/RECLAIM_3.4/classes.js
+++ b/RECLAIM_3.4/classes.js
@@ -149,6 +149,13 @@ class Unit extends Entity {
             return;
         }
 
+        // [NEW] Worker 유닛: 공격 없이 이동만
+        if (this.stats.isBuilder) {
+            const moveDir = this.team === 'player' ? 1 : -1;
+            this.x += this.stats.speed * moveDir;
+            return;
+        }
+
         // 怨듭쨷 ?좊떅 留??댄깉 泥섎━ (洹??
         if (this.stats.type === 'air' && !this.stats.id.startsWith('drone') && !['blackhawk', 'chinook'].includes(this.stats.id)) {
             const isOut = (this.team === 'player' && this.x > CONFIG.mapWidth + 100) || (this.team === 'enemy' && this.x < -100);
@@ -496,7 +503,27 @@ class Unit extends Entity {
         const id = this.stats.id;
 
         // [湲곗〈 ?좊떅 洹몃━湲?肄붾뱶 ?좎?, 釉붾옓?명겕/移섎늻?щ쭔 ?섏젙]
-        if (id === 'infantry') { ctx.fillRect(-6, -20, 12, 20); ctx.beginPath(); ctx.arc(0, -24, 5, 0, Math.PI * 2); ctx.fill(); ctx.fillStyle = '#1e293b'; ctx.fillRect(2, -18, 10, 3); }
+        // [NEW] Worker 유닛 렌더링
+        if (id === 'worker') {
+            // 몸통 (노란색 조끼)
+            ctx.fillStyle = '#facc15';
+            ctx.fillRect(-7, -22, 14, 22);
+            // 머리
+            ctx.fillStyle = this.team === 'player' ? '#3b82f6' : '#ef4444';
+            ctx.beginPath();
+            ctx.arc(0, -26, 5, 0, Math.PI * 2);
+            ctx.fill();
+            // 헬멧
+            ctx.fillStyle = '#f59e0b';
+            ctx.beginPath();
+            ctx.arc(0, -27, 6, Math.PI, 0);
+            ctx.fill();
+            // 도구 (망치/렌치)
+            ctx.fillStyle = '#64748b';
+            ctx.fillRect(6, -18, 8, 4);
+            ctx.fillRect(12, -20, 3, 8);
+        }
+        else if (id === 'infantry') { ctx.fillRect(-6, -20, 12, 20); ctx.beginPath(); ctx.arc(0, -24, 5, 0, Math.PI * 2); ctx.fill(); ctx.fillStyle = '#1e293b'; ctx.fillRect(2, -18, 10, 3); }
         else if (id === 'rpg') { ctx.fillRect(-5, -18, 10, 18); ctx.beginPath(); ctx.arc(0, -22, 4, 0, Math.PI * 2); ctx.fill(); ctx.fillStyle = '#334155'; ctx.fillRect(-2, -24, 12, 6); ctx.fillStyle = '#7f1d1d'; ctx.fillRect(8, -24, 4, 6); }
         else if (id === 'special_forces') { ctx.fillStyle = '#171717'; ctx.fillRect(-7, -22, 14, 22); ctx.fillStyle = '#1e293b'; ctx.fillRect(-7, -22, 14, 10); ctx.beginPath(); ctx.arc(0, -26, 5, 0, Math.PI * 2); ctx.fill(); ctx.fillStyle = '#10b981'; ctx.beginPath(); ctx.arc(-2, -26, 1.5, 0, Math.PI * 2); ctx.arc(2, -26, 1.5, 0, Math.PI * 2); ctx.fill(); ctx.fillStyle = '#000'; ctx.fillRect(4, -18, 12, 4); }
         else if (id === 'humvee') { const bc = this.team === 'player' ? '#3b82f6' : '#ef4444'; ctx.fillStyle = bc; ctx.fillRect(-20, -15, 40, 15); ctx.fillStyle = '#1e293b'; ctx.beginPath(); ctx.moveTo(-10, -15); ctx.lineTo(-5, -25); ctx.lineTo(10, -25); ctx.lineTo(15, -15); ctx.fill(); ctx.fillStyle = '#000'; ctx.beginPath(); ctx.arc(-12, 0, 6, 0, Math.PI * 2); ctx.arc(12, 0, 6, 0, Math.PI * 2); ctx.fill(); }
diff --git a/RECLAIM_3.4/data.js b/RECLAIM_3.4/data.js
index f7d989f..cf14af1 100644
--- a/RECLAIM_3.4/data.js
+++ b/RECLAIM_3.4/data.js
@@ -44,8 +44,62 @@
         turret: { hp: 1500, width: 50, height: 60, color: '#64748b', name: 'CIWS 포탑', damage: 12, range: 500, rate: 8, antiAir: true }
     },
 
+    // ============================================
+    // [NEW] 건설 가능 건물 정의 (작업자가 건설)
+    // ============================================
+    constructable: {
+        barracks: {
+            id: 'barracks',
+            name: '보병막사',
+            hp: 2000,
+            width: 120,
+            height: 80,
+            buildTime: 300,      // 5초 (60fps 기준)
+            cooldown: 180,       // 3초 쿨타임
+            cost: 300,
+            footprint: { w: 140, h: 20 },  // 충돌 판정용
+            productionTab: 'infantry',     // 이 건물에서 생산 가능한 탭
+        },
+        watchtower_new: {
+            id: 'watchtower_new',
+            name: '감시탑',
+            hp: 1200,
+            width: 60,
+            height: 80,
+            buildTime: 180,      // 3초
+            cooldown: 120,       // 2초 쿨타임
+            cost: 150,
+            footprint: { w: 80, h: 20 },
+            canShoot: true,
+            damage: 8,
+            range: 400,
+            rate: 12,
+            projectileType: 'bullet',
+        },
+        tank_depot: {
+            id: 'tank_depot',
+            name: '전차기지',
+            hp: 2500,
+            width: 150,
+            height: 100,
+            buildTime: 420,      // 7초
+            cooldown: 240,       // 4초 쿨타임
+            cost: 500,
+            footprint: { w: 170, h: 25 },
+            productionTab: 'armored',      // 이 건물에서 생산 가능한 탭
+        }
+    },
+
     units: {
         // [INFANTRY]
+        // [NEW] 작업자 (건설 유닛)
+        worker: {
+            id: 'worker', name: '작업자', cost: 50, cooldown: 60, maxCount: 5,
+            hp: 80, damage: 0, range: 0, speed: 1.0,
+            width: 18, height: 28, color: '#facc15', type: 'bio', category: 'infantry',
+            role: '건설 유닛', description: '건물을 건설할 수 있는 작업자입니다. 전투 능력이 없습니다.',
+            isBuilder: true,  // 건설 가능 플래그
+        },
         infantry: {
             id: 'infantry', name: '보병', cost: 15, cooldown: 25, maxCount: 40,
             hp: 50, damage: 8, range: 120, speed: 0.8,
-- 
2.43.0

